## 取り組んだ課題一覧
- SQL超入門コース
## わかったこと
- - 複数のSQL文を送る際、1つ以上のSQL文をひとかたまりとして扱うように指示する
- このかたまりをトランザクションと呼ぶ
    - トランザクションの途中で処理が中断されないようにする
    - トランザクションの途中で他の人の処理が割り込めないようにする
- コミットはトランザクションが終了する際に、それら「仮の書き換え」をすべて確定したことにする
- ロールバックはトランザクション中に異常が発生して中断した場合、すべての仮の書き換えをキャンセルしてなかったことのする

```
BEGIN;
-- 処理1: アーカイブテーブルへコピー
INSERT INTO 家計簿アーカイブ
SELECT * FROM 家計簿 WHERE 日付 <= '2018-01-31';
-- 処理2: 家計簿アーカイブから削除
DELETE FROM 家計簿 WHERE 日付 <= '2018-01-31';
COMMIT;
```

- 3つの副作用として「ダーティリード」、「反復不能読み取り」、「ファントムリード」
- 行ロック

```
BEGIN ;
SELECT * FROM 家計簿
WHERE 日付 >= '2018-02-01'
    FOR UPDATE; --2月以降のデータを明示的ロック
-- 集計処理1
SELECT ~ ;
-- 集計処理2
SELECT ~ ;
-- 集計処理3
SELECT ~ ;
COMMIT; -- ロックが解除
```

- 表ロック

```
BEGIN ;
LOCK TABLE 家計簿 IN EXCLUSIVE MODE; --表を明示的ロック
-- 集計処理1
SELECT ~ ;
-- 集計処理2
SELECT ~ ;
-- 集計処理3
SELECT ~ ;
COMMIT;
```
## 次やること
- スッキリわかるSQL入門 第3版 ドリル256問付き! (スッキリわかる入門シリーズ)
## 感じたこと
- 章末の練習問題がインプットしたことのアウトプットになってよかったです。
## 学習時間
- 本日：1h00m
- 累計：227h15m
